{"version":3,"file":"commonHelpers.js","sources":["../src/js/booksAPI.js","../src/js/header.js","../src/js/categories-list-render.js","../src/js/category-template.js","../src/js/category-render-function.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nlet selectedCategory;\nlet selectedBookID;\nexport class booksAPI{\n    constructor() {\n        this.BASE_URL = 'https://books-backend.p.goit.global/books';\n        \n    }\n\n    async getCategoriesList() {\n        const url = this.BASE_URL + '/category-list';\n        const res = await axios.get(url);\n        console.log(res);\n        return res.data;\n    }\n\n    async getPopularBooks() {\n        const url = this.BASE_URL + '/top-books ';\n        const res = await axios.get(url);\n        return res.data;\n    }\n\n    async getSelectedCategory(selectedCategory) {\n        const url = this.BASE_URL + `/category?category=${selectedCategory}`;\n        const res = await axios.get(url);\n        return res.data;\n    }\n\n    async getBookDetailedInfo(selectedBookID) {\n        const url = this.BASE_URL + `/${selectedBookID}`;\n        const res = await axios.get(url);\n        return res.data;\n    }\n}","// add import of refs from refs.js\n\n//  this should be forwarded to refs.js\nconst listItems = document.querySelectorAll('.nav-list-item');\nconst currentPage = window.location.href;\nlet link;\n\n// function itself should be imported to main.js\nexport function changeNavBgColor() {\n  function removeAllCurrentPageClasses() {\n    listItems.forEach(item => item.classList.remove('current-page'));\n  }\n\n  function setCurrentPageClass(link) {\n    if (link && link.href === currentPage) {\n      link.closest('.nav-list-item').classList.add('current-page');\n    }\n  }\n\n  function clickHandler(event) {\n    removeAllCurrentPageClasses();\n    event.currentTarget.classList.add('current-page');\n  }\n\n  listItems.forEach(item => {\n    link = item.querySelector('.nav-link');\n    setCurrentPageClass(link);\n\n    item.addEventListener('click', clickHandler);\n  });\n}\n\n// function should be called in main.js\nchangeNavBgColor();","const categoriesList = document.querySelector('.categories-list-main')\n\nexport function categoryListTemplate(books) {\n    return books\n        .map((book) => { return `<li class='categories-list-item'><a href=\"\">${book.list_name}</a></li>` })\n        .join('');\n}\n\nexport function renderCategoriesList(books) {\n    const markup = categoryListTemplate(books);\n    categoriesList.insertAdjacentHTML('beforeend', markup);\n}","                      \n export function mainBookTemplate(book){\n    const { book_image, title, author, _id } = book;\n       \n       return `<li class=\"book-item\" data-id=\"${_id}\">\n       <div class=\"book-item-container\">\n           <div class=\"book-card-container\"> \n            <img class=\"book-card\" src=\"${book_image}\" alt=\"${title}\">\n               <p class=\"book-card-hover-text\">QUICK VIEW</p>\n           </div>\n           <div class=\"book-details\">\n               <p class=\"book-title\">${title}</p>\n               <p class=\"book-author\">${author}</p>\n           </div>\n       </div>\n  </li>`;\n           } \n  \nexport function mainBooksTemplate(books) {\n      return books.map(mainBookTemplate).join('');\n  }\n  \n\n","import { mainBooksTemplate } from \"./category-template\";  \n\nexport function renderCategoriesMain(books) {\n      const categoriesMain = document.querySelector('.all-categories-main');\n      const markupMain = mainBooksTemplate(books);\n      categoriesMain.insertAdjacentHTML('beforeend', markupMain);\n  }\n \n           \n       ","import axios from 'axios';\nimport iziToast from 'izitoast';\nimport Swiper from 'swiper';\nimport { Navigation, Pagination } from 'swiper/modules';\nimport 'swiper/css';\nimport 'swiper/css/navigation';\nimport 'swiper/css/pagination';\n\nimport { booksAPI } from './js/booksAPI';\n// import './js/category-render-function';\n// import { mainBooksTemplate } from './js/category-template';\nimport './js/localStorageFunctions';\nimport './js/modal';\nimport './js/refs';\nimport './js/themes';\nimport './js/shopping-list-render-function';\nimport './js/shopping-list-template';\nimport './js/header';\nimport './js/categories-list-render';\nimport { renderCategoriesList } from './js/categories-list-render';\nimport { renderCategoriesMain } from './js/category-render-function';\n\nconst booksApi = new booksAPI();\n\n\n// categories-list**************************************\n\nasync function addCategoriesList() {\n    let books;\n    try {\n        books = await booksApi.getCategoriesList();\n    } catch(err) {\n        console.log(err)\n        return\n    }\n    renderCategoriesList(books);\n    \n}\n\naddCategoriesList();\n\n\n// all-categories*******************************************\nlet selectedCategory;\n\n// should delete later\nconst categoriesListMain = document.querySelector('.categories-list-main');\n\ncategoriesListMain.addEventListener('click', onCatListClick);\n\nasync function onCatListClick(e) {\n    e.preventDefault();\n    let books;\n    if (e.target === e.currentTarget) return;\n    selectedCategory = e.target.closest('li');\n    if (selectedCategory.textContent === 'All categories') {\n        try {\n            const popularBooks = await booksApi.getPopularBooks();\n            console.log(popularBooks)\n        }\n        catch (err) {\n            console.log('error');\n        }\n    }\n    try {\n        books = await booksApi.getSelectedCategory(selectedCategory.textContent);\n    } catch(err) {\n        console.log('error');\n    }\n   \n   renderCategoriesMain(books);\n}\n\n\n// ================modal================\n\nconst booksList = document.querySelector('.categories-list-main');\nbooksList.addEventListener('click', async e => {\n  if (e.target === e.currentTarget) return;\n    const bookId = e.target.dataset.id;\nif (!bookId) return\n  const book = await booksApi.getBookDetailedInfo(bookId);\n  const markup = createModalMarkup(book);\n  pushMarkup(markup);\n\n  const modalBtn = document.querySelector('.modal-btn');\n    checkBookStatus(book);\n    modalBtn.addEventListener('click', elem => {\n        elem.preventDefault()\n        toggleShoppingList(book);\n    })\n});\n//hideModal()\n\n// =====================================\n"],"names":["booksAPI","url","res","axios","selectedCategory","selectedBookID","listItems","currentPage","link","changeNavBgColor","removeAllCurrentPageClasses","item","setCurrentPageClass","clickHandler","event","categoriesList","categoryListTemplate","books","book","renderCategoriesList","markup","mainBookTemplate","book_image","title","author","_id","mainBooksTemplate","renderCategoriesMain","categoriesMain","markupMain","booksApi","addCategoriesList","err","categoriesListMain","onCatListClick","popularBooks","booksList","bookId","modalBtn","elem"],"mappings":"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"}