{"version":3,"file":"commonHelpers.js","sources":["../src/js/booksAPI.js","../src/js/localStorageFunctions.js","../src/js/modal.js","../src/js/refs.js","../src/js/header.js","../src/js/categories-list-render.js","../src/js/category-template.js","../src/js/category-render-function.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nlet selectedCategory;\nlet selectedBookID;\nexport class booksAPI{\n    constructor() {\n        this.BASE_URL = 'https://books-backend.p.goit.global/books';\n        \n    }\n\n    async getCategoriesList() {\n        const url = this.BASE_URL + '/category-list';\n        const res = await axios.get(url);\n        console.log(res);\n        return res.data;\n    }\n\n    async getPopularBooks() {\n        const url = this.BASE_URL + '/top-books ';\n        const res = await axios.get(url);\n        return res.data;\n    }\n\n    async getSelectedCategory(selectedCategory) {\n        const url = this.BASE_URL + `/category?category=${selectedCategory}`;\n        const res = await axios.get(url);\n        return res.data;\n    }\n\n    async getBookDetailedInfo(selectedBookID) {\n        const url = this.BASE_URL + `/${selectedBookID}`;\n        const res = await axios.get(url);\n        return res.data;\n    }\n}","export function toggleShoppingList(book) {\n  const modalButton = document.querySelector('.modal-btn');\n\n  let shoppingList = JSON.parse(localStorage.getItem('shoppingList')) || [];\n  let btnTextContent;\n\n  const bookIndex = shoppingList.findIndex(item => book._id === item._id);\n\n  if (bookIndex === -1) {\n    shoppingList.push(book);\n    btnTextContent = 'remove from shopping list';\n  } else {\n    shoppingList.splice(bookIndex, 1);\n    btnTextContent = 'add to shopping list';\n  }\n\n  localStorage.setItem('shoppingList', JSON.stringify(shoppingList));\n  modalButton.textContent = btnTextContent;\n}\n\nexport function checkBookStatus(book) {\n  const modalButton = document.querySelector('.modal-btn');\n  let shoppingList = JSON.parse(localStorage.getItem('shoppingList')) || [];\n  let btnTextContent;\n\n  const bookIndex = shoppingList.findIndex(item => book._id === item._id);\n\n  if (bookIndex === -1) {\n    btnTextContent = 'add to shopping list';\n  } else {\n    btnTextContent = 'remove from shopping list';\n  }\n\n  modalButton.textContent = btnTextContent;\n}\n","export function createModalMarkup(FROM_SERVER) {\n  const markup = `<div class=\"modal-backdrop\">\n    <div class=\"modal-content-container\">\n    <button type=\"submit\" class=\"modal-close-btn\"><img src=\"../img/symbol-defs.svg#icon-x-close\" class=\"modal-close-btn\"/></button>\n    <img src=\"${FROM_SERVER.book_image}\" class=\"modal-book-image\" />\n    <div class=\"modal-book-info\">\n    <h3 class=\"modal-title\">${FROM_SERVER.title}</h3>\n    <p class=\"modal-author\">${FROM_SERVER.author}</p>\n    <p class=\"modal-description\">${FROM_SERVER.description}</p>\n    <ul class=\"modal-shops-list\">\n    <li class=\"modal-shops-item\"><a href=\"${FROM_SERVER.buy_links[0].url}\"><img src=\"AMAZON\"/></a></li>\n    <li class=\"modal-shops-item\"><a href=\"${FROM_SERVER.buy_links[1].url}\"><img src=\"APPLE BOOKS\"/></a></li>\n    </ul>\n    <button type=\"submit\" class=\"modal-btn\"></button>\n    </div>\n    </div>\n    </div>`;\n  return markup;\n  // pushMarkup(markup);\n}\n\nexport function pushMarkup(markup) {\n  document.body.insertAdjacentHTML('beforeend', markup);\n}\n\nexport function hideModal() {\n  const modalBackdrop = document.querySelector('.modal-backdrop');\n  const modalCloseBtn = document.querySelector('.modal-close-btn');\n\n  document.addEventListener('keydown', event => {\n    event.preventDefault();\n    if (event.key === 'Escape') {\n      removeListeners();\n    }\n  });\n\n  modalCloseBtn.addEventListener('click', event => {\n    event.preventDefault();\n    removeListeners();\n  });\n\n  modalBackdrop.addEventListener('click', event => {\n    event.preventDefault();\n    if (event.target === modalBackdrop) {\n      removeListeners();\n    }\n  });\n}\n\nexport function removeListeners() {\n  const modalBackdrop = document.querySelector('.modal-backdrop');\n  const modalCloseBtn = document.querySelector('.modal-close-btn');\n\n\n  modalBackdrop.parentNode.removeChild(modalBackdrop);\n\n  document.removeEventListener('keydown', e => {\n    console.log('listener is remove');\n  });\n  modalCloseBtn.removeEventListener('click', e => {\n    console.log('listener is remove');\n  });\n  modalBackdrop.removeEventListener('click', e => {\n    console.log('listener is remove');\n  });\n}\n","\nexport const refs = {\n  categoriesMain: document.querySelector('.all-categories-main'),\n};\n","// add import of refs from refs.js\n\n//  this should be forwarded to refs.js\nconst listItems = document.querySelectorAll('.nav-list-item');\nconst currentPage = window.location.href;\nlet link;\n\n// function itself should be imported to main.js\nexport function changeNavBgColor() {\n  function removeAllCurrentPageClasses() {\n    listItems.forEach(item => item.classList.remove('current-page'));\n  }\n\n  function setCurrentPageClass(link) {\n    if (link && link.href === currentPage) {\n      link.closest('.nav-list-item').classList.add('current-page');\n    }\n  }\n\n  function clickHandler(event) {\n    removeAllCurrentPageClasses();\n    event.currentTarget.classList.add('current-page');\n  }\n\n  listItems.forEach(item => {\n    link = item.querySelector('.nav-link');\n    setCurrentPageClass(link);\n\n    item.addEventListener('click', clickHandler);\n  });\n}\n\n// function should be called in main.js\nchangeNavBgColor();\n\n// -----------------------------------------------\n\n// burger menu\n\n//  this should be forwarded to refs.js\nconst menuOpenBtn = document.querySelector('.burger-menu-open-btn');\nconst menuCloseBtn = document.querySelector('.burger-menu-close-btn');\nconst burgerMenu = document.querySelector('.burger-menu');\n\nexport function openMenu() {\n  menuOpenBtn.style.display = 'none';\n  menuCloseBtn.style.display = 'block';\n  burgerMenu.style.display = 'block';\n}\n export function closeMenu() {\n  menuOpenBtn.style.display = 'block';\n  menuCloseBtn.style.display = 'none';\n  burgerMenu.style.display = 'none';\n}\n\n// event listeners will be forwarded to main.js\nmenuOpenBtn.addEventListener('click', openMenu);\nmenuCloseBtn.addEventListener('click', closeMenu);\n// end burger-menu\n","const categoriesList = document.querySelector('.categories-list-main')\n\nexport function categoryListTemplate(books) {\n    return books\n        .map((book) => { return `<li class='categories-list-item'><a href=\"\">${book.list_name}</a></li>` })\n        .join('');\n}\n\nexport function renderCategoriesList(books) {\n    const markup = categoryListTemplate(books);\n    categoriesList.insertAdjacentHTML('beforeend', markup);\n}","                      \n export function mainBookTemplate(book){\n    const { book_image, title, author, _id } = book;\n       \n       return `<li class=\"book-item\" data-id=\"${_id}\">\n       <div class=\"book-item-container\">\n           <div class=\"book-card-container\"> \n            <img class=\"book-card\" src=\"${book_image}\" alt=\"${title}\">\n               <p class=\"book-card-hover-text\">QUICK VIEW</p>\n           </div>\n           <div class=\"book-details\">\n               <p class=\"book-title\">${title}</p>\n               <p class=\"book-author\">${author}</p>\n           </div>\n       </div>\n  </li>`;\n           } \n  \nexport function mainBooksTemplate(books) {\n      return books.map(mainBookTemplate).join('');\n  }\n  \n\n","import { mainBooksTemplate } from \"./category-template\";  \nimport {refs} from './refs'\nexport function renderCategoriesMain(books) {\n      \n      const markupMain = mainBooksTemplate(books);\n      refs.categoriesMain.insertAdjacentHTML('beforeend', markupMain);\n  }\n \n           \n       ","import axios from 'axios';\nimport iziToast from 'izitoast';\nimport Swiper from 'swiper';\nimport { Navigation, Pagination } from 'swiper/modules';\nimport 'swiper/css';\nimport 'swiper/css/navigation';\nimport 'swiper/css/pagination';\n\nimport { booksAPI } from './js/booksAPI';\n// import './js/category-render-function';\n// import { mainBooksTemplate } from './js/category-template';\nimport {\n  toggleShoppingList,\n  checkBookStatus,\n} from './js/localStorageFunctions';\nimport { createModalMarkup, pushMarkup, hideModal } from './js/modal';\nimport './js/refs';\nimport './js/themes';\nimport './js/shopping-list-render-function';\nimport './js/shopping-list-template';\nimport './js/header';\nimport './js/categories-list-render';\nimport { renderCategoriesList } from './js/categories-list-render';\nimport { renderCategoriesMain } from './js/category-render-function';\nimport './js/popular-books-render';\nconst booksApi = new booksAPI();\n\n// categories-list**************************************\n\nasync function addCategoriesList() {\n  let books;\n  try {\n    books = await booksApi.getCategoriesList();\n  } catch (err) {\n    console.log(err);\n    return;\n  }\n  renderCategoriesList(books);\n}\n\naddCategoriesList();\n\n// all-categories*******************************************\nlet selectedCategory;\n\n// should delete later\nconst categoriesListMain = document.querySelector('.categories-list-main');\n\ncategoriesListMain.addEventListener('click', onCatListClick);\n\nasync function onCatListClick(e) {\n  e.preventDefault();\n  let books;\n  if (e.target === e.currentTarget) return;\n  selectedCategory = e.target.closest('li');\n  if (selectedCategory.textContent === 'All categories') {\n    try {\n      const popularBooks = await booksApi.getPopularBooks();\n      console.log(popularBooks);\n    } catch (err) {\n      console.log('error');\n    }\n  }\n  try {\n    books = await booksApi.getSelectedCategory(selectedCategory.textContent);\n  } catch (err) {\n    console.log('error');\n  }\n\n  renderCategoriesMain(books);\n}\n\n// ================modal================\n\nconst booksList = document.querySelector('.all-categories-main');\nbooksList.addEventListener('click', async e => {\n  if (e.target === e.currentTarget) return;\n\n  const bookId = e.target.closest('.book-item').dataset.id;\n\n  // console.log(bookId);\n  const book = await booksApi.getBookDetailedInfo(bookId);\n//   console.log(book);\n\n  const markup = createModalMarkup(book);\n  pushMarkup(markup);\n\n  checkBookStatus(book);\n  const modalButton = document.querySelector('.modal-btn');\n\n  modalButton.addEventListener('click', elem => {\n      elem.preventDefault();\n      \n    toggleShoppingList(book);\n    hideModal();\n  });\n});\n\n// =====================================\n"],"names":["booksAPI","url","res","axios","selectedCategory","selectedBookID","toggleShoppingList","book","modalButton","shoppingList","btnTextContent","bookIndex","item","checkBookStatus","createModalMarkup","FROM_SERVER","pushMarkup","markup","hideModal","modalBackdrop","modalCloseBtn","event","removeListeners","e","refs","listItems","currentPage","link","changeNavBgColor","removeAllCurrentPageClasses","setCurrentPageClass","clickHandler","menuOpenBtn","menuCloseBtn","burgerMenu","openMenu","closeMenu","categoriesList","categoryListTemplate","books","renderCategoriesList","mainBookTemplate","book_image","title","author","_id","mainBooksTemplate","renderCategoriesMain","markupMain","booksApi","addCategoriesList","err","categoriesListMain","onCatListClick","popularBooks","booksList","bookId","elem"],"mappings":"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"}