import"./assets/themes-20cd9258.js";import{a as r}from"./assets/vendor-de8bc860.js";class g{constructor(){this.BASE_URL="https://books-backend.p.goit.global/books"}async getCategoriesList(){const t=this.BASE_URL+"/category-list",o=await r.get(t);return console.log(o),o.data}async getPopularBooks(){const t=this.BASE_URL+"/top-books ";return(await r.get(t)).data}async getSelectedCategory(t){const o=this.BASE_URL+`/category?category=${t}`;return(await r.get(o)).data}async getBookDetailedInfo(t){const o=this.BASE_URL+`/${t}`;return(await r.get(o)).data}}const i=document.querySelectorAll(".nav-list-item"),d=window.location.href;let l;function k(){function e(){i.forEach(a=>a.classList.remove("current-page"))}function t(a){a&&a.href===d&&a.closest(".nav-list-item").classList.add("current-page")}function o(a){e(),a.currentTarget.classList.add("current-page")}i.forEach(a=>{l=a.querySelector(".nav-link"),t(l),a.addEventListener("click",o)})}k();const m=document.querySelector(".categories-list-main");function p(e){return e.map(t=>`<li class='categories-list-item'><a href="">${t.list_name}</a></li>`).join("")}function f(e){const t=p(e);m.insertAdjacentHTML("beforeend",t)}function b(e){const{book_image:t,title:o,author:a,_id:n}=e;return`<li class="book-item" data-id="${n}">
       <div class="book-item-container">
           <div class="book-card-container"> 
            <img class="book-card" src="${t}" alt="${o}">
               <p class="book-card-hover-text">QUICK VIEW</p>
           </div>
           <div class="book-details">
               <p class="book-title">${o}</p>
               <p class="book-author">${a}</p>
           </div>
       </div>
  </li>`}function y(e){return e.map(b).join("")}function L(e){const t=document.querySelector(".all-categories-main"),o=y(e);t.insertAdjacentHTML("beforeend",o)}const s=new g;async function h(){let e;try{e=await s.getCategoriesList()}catch(t){console.log(t);return}f(e)}h();let c;const v=document.querySelector(".categories-list-main");v.addEventListener("click",C);async function C(e){e.preventDefault();let t;if(e.target!==e.currentTarget){if(c=e.target.closest("li"),c.textContent==="All categories")try{const o=await s.getPopularBooks();console.log(o)}catch{console.log("error")}try{t=await s.getSelectedCategory(c.textContent)}catch{console.log("error")}L(t)}}const S=document.querySelector(".categories-list-main");S.addEventListener("click",async e=>{if(e.target===e.currentTarget)return;const t=e.target.dataset.id;if(!t)return;const o=await s.getBookDetailedInfo(t),a=createModalMarkup(o);pushMarkup(a);const n=document.querySelector(".modal-btn");checkBookStatus(o),n.addEventListener("click",u=>{u.preventDefault(),toggleShoppingList(o)})});
//# sourceMappingURL=commonHelpers.js.map
