import{r as n}from"./assets/modal-sign-up-6e95e995.js";import{a as l,i as k,S as f}from"./assets/vendor-e2ce0d38.js";class p{constructor(){this.BASE_URL="https://books-backend.p.goit.global/books"}async getCategoriesList(){const e=this.BASE_URL+"/category-list";return(await l.get(e)).data}async getPopularBooks(){const e=this.BASE_URL+"/top-books ";return(await l.get(e)).data}async getSelectedCategory(e){const o=this.BASE_URL+`/category?category=${e}`;return(await l.get(o)).data}async getBookDetailedInfo(e){const o=this.BASE_URL+`/${e}`;return(await l.get(o)).data}}function h(t){const e=document.querySelector(".modal-btn");let o=JSON.parse(localStorage.getItem("shoppingList"))||[],i;const s=o.findIndex(r=>t._id===r._id);s===-1?(o.push(t),i="remove from shopping list"):(o.splice(s,1),i="add to shopping list"),localStorage.setItem("shoppingList",JSON.stringify(o)),e.textContent=i}function b(t){const e=document.querySelector(".modal-btn");let o=JSON.parse(localStorage.getItem("shoppingList"))||[],i;o.findIndex(r=>t._id===r._id)===-1?i="add to shopping list":i="remove from shopping list",e.textContent=i}function v(t){return`<div class="modal-backdrop">
    <div class="modal-content-container">
    <button type="submit" class="modal-close-btn"><svg width=24 height=24><use href="../img/symbol-defs.svg#icon-x-close"></use></svg></button>
    <img src="${t.book_image}" class="modal-book-image" />
    <div class="modal-book-info">
    <h3 class="modal-title">${t.title}</h3>
    <p class="modal-author">${t.author}</p>
    <p class="modal-description">${t.description}</p>
    <ul class="modal-shops-list">
    <li class="modal-shops-item"><a href="${t.buy_links[0].url}" target="_blank"><img src="../img/amazon-l.png" width=62 height=19/></a></li>
    <li class="modal-shops-item"><a href="${t.buy_links[1].url}" target="_blank"><img src="../img/apple-l.png" width=33 height=32/></a></li>
    </ul>
    </div>
    <button type="submit" class="modal-btn"></button>

    </div>
    </div>`}function w(t){document.body.insertAdjacentHTML("beforeend",t)}function L(){const t=document.querySelector(".modal-backdrop"),e=document.querySelector(".modal-close-btn");document.addEventListener("keydown",o=>{o.preventDefault(),o.key==="Escape"&&c()}),e.addEventListener("click",o=>{o.preventDefault(),c()}),t.addEventListener("click",o=>{o.preventDefault(),o.target===t&&c()})}function c(){const t=document.querySelector(".modal-backdrop"),e=document.querySelector(".modal-close-btn");t&&t.parentNode&&t.parentNode.removeChild(t),e&&(document.removeEventListener("keydown",o=>{console.log("listener is remove")}),e.removeEventListener("click",o=>{console.log("listener is remove")}),t.removeEventListener("click",o=>{console.log("listener is remove")}))}function y(t){const{book_image:e,title:o,author:i,_id:s}=t;return`<li class="book-item" data-id="${s}">
       <div class="book-item-container">
           <div class="book-card-container"> 
            <img class="book-card" src="${e}" alt="${o}">
               <p class="book-card-hover-text">QUICK VIEW</p>
           </div>
           <div class="book-details">
               <p class="book-title">${o}</p>
               <p class="book-author">${i}</p>
           </div>
       </div>
  </li>`}function x(t){return t.map(y).join("")}function u(t){B();const e=x(t);n.categoriesMain.insertAdjacentHTML("beforeend",e)}function S(t){if(t.textContent!=="All categories"){const e=`${t.textContent}`;n.categoriesMainTitle.insertAdjacentHTML("beforeend",e)}}function B(){document.querySelectorAll(".title-book-section").forEach(function(e){const o=e.textContent.trim(),i=o.lastIndexOf(" "),s=o.slice(0,i)+'<span class="last-word">'+o.slice(i)+"</span>";e.innerHTML=s})}function g(){k.error({title:"",backgroundColor:"rgb(230, 92, 33)",message:"there are no books in this category",position:"topLeft"})}const T=new p;async function d(t){if(t.textContent==="All categories"||t==="All categories"){A("Best Sellers Books");try{(await T.getPopularBooks()).map(o=>{M(o),$()})}catch{console.log("error"),g()}}}function C(t){return`<li class="li-title"><h3 class="book-author popular-title">${t.list_name}</h3></li>`}function M(t){n.categoriesMain.insertAdjacentHTML("beforeend",C(t)),u(t.books)}function A(t){const e=`${t}`;n.categoriesMainTitle.insertAdjacentHTML("afterbegin",e)}function $(){const t="<button class='see-more-btn'>See more</button>";n.categoriesMain.insertAdjacentHTML("beforeend",t)}const I=document.querySelector(".categories-list-main"),_=new p;function j(t){return t.map(e=>`<li class='categories-list-item'><a href="">${e.list_name}</a></li>`).join("")}function H(t){const e=j(t);I.insertAdjacentHTML("beforeend",e)}async function E(){let t;try{t=await _.getCategoriesList()}catch(e){console.log(e);return}H(t)}function P(){E(),d("All categories")}const q=[{title:"Save the Children",url:"https://www.savethechildren.net/what-we-do/emergencies/ukraine-crisis",img:"../../img/support/support-img1@1x.png",img2:"../../img/support/support-img1@2x.png"},{title:"Project HOPE",url:"https://www.projecthope.org/country/ukraine/",img:"../../img/support/support-img2@1x.png",img2:"../../img/support/support-img2@2x.png"},{title:"International Medical Corps",url:"https://internationalmedicalcorps.org/country/ukraine/",img:"../../img/support/support-img3@1x.png",img2:"../../img/support/support-img3@2x.png"},{title:"RAZOM",url:"https://www.razomforukraine.org/",img:"../../img/support/support-img4@1x.png",img2:"../../img/support/support-img4@2x.png"},{title:"Action against hunger",url:"https://www.actionagainsthunger.org/location/europe/ukraine/",img:"../../img/support/support-img5@1x.png",img2:"../../img/support/support-img5@2x.png"},{title:"Serhiy Prytula Charity Foundation",url:"https://prytulafoundation.org/en",img:"../../img/support/support-img6@1x.png",img2:"../../img/support/support-img6@2x.png"},{title:"Medicins Sans Frontieres",url:"https://www.msf.org/ukraine",img:"../../img/support/support-img7@1x.png",img2:"../../img/support/support-img7@2x.png"},{title:"World vision",url:"https://www.wvi.org/emergencies/ukraine",img:"../../img/support/support-img8@1x.png",img2:"../../img/support/support-img8@2x.png"},{title:"UNITED24",url:"https://u24.gov.ua/uk",img:"../../img/support/support-img9@1x.png",img2:"../../img/support/support-img9@2x.png"}];n.upBtn.addEventListener("click",W);function D(t){n.supportList.insertAdjacentHTML("beforeend",t)}const N=q.map(({title:t,url:e,img:o,img2:i},s)=>{const r=(s+1).toString().padStart(2,"0");return`<div class="support-list-item swiper-slide">
  <a href="${e}" class="support-link" aria-label="${t}" target="_blank" rel="noopener norefferer nofollow">
  <p class="support-number">${r}</p>
  <img class="support-img" src="${o}" data-source="${i}" alt="${t}" />
  </a></div>`}).join("");D(N);const U=new f(".swiper",{direction:"vertical",loop:!0,slidesPerView:4,spaceBetween:20,breakpoints:{768:{slidesPerView:6,spaceBetween:20}}});function W(){U.slideNext(200)}const m=new p;let a;window.addEventListener("load",P);n.categoriesListMain.addEventListener("click",z);async function z(t){t.preventDefault();let e;if(n.categoriesMain.innerHTML="",n.categoriesMainTitle.innerHTML="",t.target!==t.currentTarget){a=t.target.closest("li"),J(a),d(a);try{e=await m.getSelectedCategory(a.textContent)}catch{console.log("error"),g()}S(a),u(e)}}function J(t){const e=document.querySelectorAll(".categories-list-item");for(const o of e)o.textContent===t.textContent?o.classList.add("categories-list-active"):o.classList.remove("categories-list-active")}n.categoriesMain.addEventListener("click",async t=>{if(t.target===t.currentTarget)return;const e=t.target.closest(".book-item").dataset.id,o=await m.getBookDetailedInfo(e),i=v(o);w(i),b(o),document.querySelector(".modal-btn").addEventListener("click",r=>{r.preventDefault(),h(o)}),L()});
//# sourceMappingURL=commonHelpers.js.map
